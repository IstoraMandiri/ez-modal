<template name="EZModal">
  <div class="ez-modal modal {{#if fade}}fade{{/if}} {{classes}}">
    <div class="modal-dialog{{#if size}} modal-{{size}}{{/if}}">
      <div class="modal-content">
        {{#if template}}
          {{> UI.dynamic template=template data=dataContext}}
        {{else}}

          {{#if headerTemplate}}
            <div class="modal-header">
              {{> UI.dynamic template=headerTemplate data=dataContext}}
            </div>
          {{else}}
            {{#if title}}
              <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">
                  <span aria-hidden="true">&times;</span>
                  <span class="sr-only">Close</span>
                </button>
                <h4 class="modal-title">{{title}}</h4>
              </div>
            {{/if}}
          {{/if}}

          {{#if bodyTemplate}}
            <div class="modal-body modal-body-template">
              {{> UI.dynamic template=bodyTemplate data=dataContext}}
            </div>
          {{else}}
            {{#if body}}
              <div class="modal-body">
                <h4>{{body}}</h4>
              </div>
            {{else}}
              {{#if bodyHtml}}
                <div class="modal-body modal-body-html">{{{bodyHtml}}}</div>
              {{/if}}
            {{/if}}
          {{/if}}
          {{#unless hideFooter}}
            <div class="modal-footer">
              {{#if footerTemplate}}
                {{> UI.dynamic template=footerTemplate data=dataContext}}
              {{else}}
                {{#if _showButtons}}
                  {{#if leftButtons}}
                    <div class="pull-left">
                      {{#each leftButtons}}
                        <div class="ez-modal-button btn
                        {{#if buttonSize}}btn-{{buttonSize}}{{/if}} btn-{{#if color}}{{color}}{{else}}{{buttonColor}}{{/if}}">{{{html}}}</div>
                      {{/each}}
                    </div>
                  {{/if}}
                  {{#if rightButtons}}
                    <div class="pull-right">
                      {{#each rightButtons}}
                        <div class="ez-modal-button btn
                        {{#if buttonSize}}btn-{{buttonSize}}{{/if}} btn-{{#if color}}{{color}}{{else}}{{buttonColor}}{{/if}}">{{{html}}}</div>
                      {{/each}}
                    </div>
                  {{/if}}
                {{else}}
                  <button type="button" class="btn
                  {{#if buttonSize}}btn-{{buttonSize}}{{/if}} btn-{{buttonColor}}" data-dismiss="modal">OK</button>
                {{/if}}
              {{/if}}
            </div>
          {{/unless}}

        {{/if}}
      </div>
    </div>
  </div>
</template>